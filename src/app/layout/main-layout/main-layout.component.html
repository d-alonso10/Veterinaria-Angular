<div class="container">
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="logo">
      <h1><span class="logo-icon">ğŸ¾</span> TeranVet</h1>
    </div>

    <div class="user-info">
      <div class="user-avatar">U</div>
      <div class="user-details">
        <h3>{{ user()?.username || 'Usuario' }}</h3>
        <p>{{ user()?.rol || 'Invitado' }}</p>
      </div>
    </div>

    <ul class="menu">
      <!-- PRINCIPAL -->
      <div class="menu-section">Principal</div>
      <li class="menu-item" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
        <a routerLink="/dashboard">
          <span class="menu-icon">ğŸ“Š</span>
          <span>Dashboard</span>
        </a>
      </li>

      <!-- GESTIÃ“N -->
      <div class="menu-section">GestiÃ³n</div>
      <li class="menu-item" routerLinkActive="active">
        <a routerLink="/clients">
          <span class="menu-icon">ğŸ‘¥</span>
          <span>Clientes</span>
        </a>
      </li>
      <li class="menu-item" routerLinkActive="active">
        <a routerLink="/pets">
          <span class="menu-icon">ğŸ¾</span>
          <span>Mascotas</span>
        </a>
      </li>
      <li class="menu-item" routerLinkActive="active">
        <a routerLink="/appointments">
          <span class="menu-icon">ğŸ“…</span>
          <span>Citas</span>
        </a>
      </li>
      <li class="menu-item" routerLinkActive="active">
        <a routerLink="/services">
          <span class="menu-icon">âš™ï¸</span>
          <span>Servicios</span>
        </a>
      </li>
      <li class="menu-item" routerLinkActive="active">
        <a routerLink="/groomers">
          <span class="menu-icon">ğŸ‘¨â€ğŸ”§</span>
          <span>Groomers</span>
        </a>
      </li>

      <!-- OPERACIONES -->
      <div class="menu-section">Operaciones</div>
      <li class="menu-item" routerLinkActive="active">
        <a routerLink="/queue">
          <span class="menu-icon">ğŸ“‹</span>
          <span>Cola de AtenciÃ³n</span>
        </a>
      </li>
      <li class="menu-item" routerLinkActive="active">
        <a routerLink="/reception">
          <span class="menu-icon">ğŸ«</span>
          <span>RecepciÃ³n</span>
        </a>
      </li>

      <!-- FINANZAS (Admin, Recepcionista, Contador) -->
      @if (user()?.rol === 'admin' || user()?.rol === 'recepcionista' || user()?.rol === 'contador') {
        <div class="menu-section">Finanzas</div>
        <li class="menu-item" routerLinkActive="active">
          <a routerLink="/payments">
            <span class="menu-icon">ğŸ’³</span>
            <span>Pagos</span>
          </a>
        </li>
      }

      <!-- REPORTES (Admin) -->
      @if (user()?.rol === 'admin') {
        <div class="menu-section">Reportes</div>
        <li class="menu-item" routerLinkActive="active">
          <a routerLink="/reports/income">
            <span class="menu-icon">ğŸ’°</span>
            <span>Ingresos</span>
          </a>
        </li>
        <li class="menu-item" routerLinkActive="active">
          <a routerLink="/reports/frequent-clients">
            <span class="menu-icon">â­</span>
            <span>Clientes Frecuentes</span>
          </a>
        </li>
        <li class="menu-item" routerLinkActive="active">
          <a routerLink="/reports/average-times">
            <span class="menu-icon">â±ï¸</span>
            <span>Tiempos Promedio</span>
          </a>
        </li>

        <!-- ADMINISTRACIÃ“N (Admin Only) -->
        <div class="menu-section">AdministraciÃ³n</div>
        <li class="menu-item" routerLinkActive="active">
          <a routerLink="/admin/users">
            <span class="menu-icon">ğŸ‘¤</span>
            <span>Usuarios</span>
          </a>
        </li>
        <li class="menu-item" routerLinkActive="active">
          <a routerLink="/admin/branches">
            <span class="menu-icon">ğŸ¢</span>
            <span>Sucursales</span>
          </a>
        </li>
      }

      <!-- LOGOUT -->
      <li class="menu-item" style="margin-top: auto; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 10px;">
        <a (click)="logout()" style="cursor: pointer;">
          <span class="menu-icon">ğŸšª</span>
          <span>Cerrar SesiÃ³n</span>
        </a>
      </li>
    </ul>
  </div>

  <!-- Main Content -->
  <div class="content">
    <div class="header">
      <div class="header-top">
        <div class="welcome">
          <h1>ğŸ“Š Dashboard Principal</h1>
          <p>
            Resumen completo del sistema -
            <span id="current-time-placeholder">{{ currentDate | date : 'fullDate' }}</span>
          </p>
        </div>
        <div class="header-actions">
          <a routerLink="/appointments/new" class="btn btn-success">â• Nueva Cita</a>
          <a routerLink="/clients/new" class="btn btn-primary">ğŸ‘¤ Agregar Cliente</a>
        </div>
      </div>
    </div>

    <div class="main-content">
      <router-outlet></router-outlet>
    </div>
  </div>
</div>
